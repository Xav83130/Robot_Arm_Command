<Desktop>:

#connection

    GridLayout:
        orientation: 'horizontal'
        rows: 2
        cols: 3
        row_default_height: 26
        size: 550, 55
        pos: 0, 530
        Label:
            text: 'Port :'
            font_size: 18
            bold: True
            size_hint_x: None
        Spinner:
            id: serialport
            height: 32
            width: 200
            text: 'Select port'
            values: app.serial_list()
            size_text: 14
            multiline: False
            size_hint_x: 50
        Button:
            id: connect
            height: 33
            width: 100
            text: 'Connection'
            on_press: app.connect()
            size_hint_x: None
        Label:
            pos: 0, 485
            text: 'Baud :'
            font_size: 18
            bold: True
            size_hint_x: None
        Spinner:
            id: baudrate
            height: 32
            width: 200
            pos: 90, 520
            text: '115200'
            values: ["9600","14400","19200","28800","38400","57600","115200"]
        Button:
            id: disconnect
            height: 33
            width: 100
            text: 'Déconnecter'
            on_press: app.disconnect()
            size_hint_x: None

#logo

    BoxLayout:
        size: 130, 150
        pos: 655, 480
        Image:
            source: 'logo_RobotArmCommand.png'

#etat

    BoxLayout:
        size: 70, 55
        pos: 560, 530
        ToggleButton:
            id: viewconnect
            text: 'Connect'
            bolt: True
            state: 'normal'


#ligne1

    BoxLayout:
        canvas:
            Fbo:
                size: (200, 200)
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                size: (780, 1.5)
                pos: (10, 510)

#coordonées des axes

    GridLayout:
        orientation: 'horizontal'
        size: 780, 35
        pos: 1, 460
        rows: 1
        cols: 6
        Label:
            text: 'X:'
            size_hint_x: .2
            font_size: 24
            bold: True
        TextInput:
            id: pos_x
            text: ''
            readonly: True
            multiline: False
            font_size: 22
            size_hint_x: .5
            bold: True
        Label:
            text: 'Y:'
            size_hint_x: 0.2
            font_size: 24
            bold: True
        TextInput:
            id: pos_y
            text: ''
            readonly: True
            multiline: False
            font_size: 22
            size_hint_x: .5
            multiline: False
            bold: True
        Label:
            text: 'Z:'
            size_hint_x: 0.2
            font_size: 24
            bold: True
        TextInput:
            id: pos_z
            text: ''
            readonly: True
            multiline: False
            font_size: 22
            size_hint_x: .5
            multiline: False
            bold: True

#ligne2

    BoxLayout:
        canvas:
            Fbo:
                size: (200, 200)
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                size: (780, 1.5)
                pos: (10, 445)


#commandes GRBL

    GridLayout:
        orientation: 'horizontal'
        size: 410, 60
        pos: 10, 380
        rows: 2
        cols: 5
        spacing: .5
        padding: .2
        Button:
            text: '$X'
            on_press: app.alarm()
        Button:
            text: 'Reset XYZ'
            on_press: app.rst_xyz()
        Button:
            text: 'Reset X'
            on_press: app.rst_x()
        Button:
            text: 'Reset Y'
            on_press: app.rst_y()
        Button:
            text: 'Reset Z'
            on_press: app.rst_z()
        Button:
            text: 'Home'
            on_press: app.home()
        Button:
            text: 'Pause'
            on_press: app.feed_hold()
        Button:
            text: 'Reprise'
            on_press: app.cycle_start()
        Button:
            text: 'Reset GRBL'
            on_press: app.rst_grbl()
        Button:
            text: 'Parametres'
            on_press: app.infos()


#ligne3 - vertical

    BoxLayout:
        canvas:
            Fbo:
                size: (200, 200)
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                size: (1.5, 350)
                pos: (440, 50)


#boutons Gcode

    GridLayout:
        orientation: 'horizontal'
        size: 410, 45
        pos: 10, 325
        rows: 2
        cols: 5
        spacing: .5
        padding: .2
        Button:
            id: save_pos
            text: 'Save pos.'
        Button:
            id: play
            text: 'Lire'
            on_press: app._send_command(app.root.ids.cmd_send_list.text)
        Button:
            text: ''
        Button:
            text: ''
        Button:
            text: '?'
            on_press: app.test()

#Text input Gcode

    BoxLayout:
        orientation: 'horizontal'
        size: 410, 250
        pos: 10, 72
        TextInput:
            id: cmd_send_list
            text: 'Entrer le Gcode suivi entree'
            on_text_validate: app._send_command(self.g_code)
            font_size: 14
            bolt: True
            size_hint_x: .5
            multiline: True
            use_bubble: True


#text input commande et/ou gcode

    GridLayout:
        orientation: 'horizontal'
        size: 410, 33
        pos: 10, 20
        rows: 1
        cols: 2
        spacing: .3
        padding: .2
        TextInput:
            id: cmd_send_alone
            on_text_validate: app._send_command(self.g_code)
            use_bubble: True
            font_size: 16
            bold: True
            size_hint_x: 3
            multiline: True

        Button:
            id: cmd_send
            text: 'Envoyer'
            on_press: app._send_command(app.root.ids.cmd_send_alone.text)

#Retour infos GRBL --------------------------

    BoxLayout:
        orientation: 'horizontal'
        size: 340, 110
        pos: 450, 330
        CodeInput:
            id: cmd_results
            text: ''
            font_size: 10
            readonly: True

#Jog

    GridLayout:
        orientation: 'horizontal'
        size: 300, 190
        pos: 470, 125
        rows: 3
        cols: 4
        spacing: 3.5
        padding: 3.5
        Label:
            text: ''
        Button:
            text: 'X+'
            font_size: 28
            bold: True
            on_press: app.x_move_pos()
        Label:
            text: ''
        Button:
            text: 'Z+'
            font_size: 28
            bold: True
            on_press: app.z_move_pos()
        Button:
            text: 'Y-'
            font_size: 28
            bold: True
            on_press: app.y_move_neg()
        Label:
            text: ''
        Button:
            text: 'Y+'
            font_size: 28
            bold: True
            on_press: app.y_move_pos()
        Label:
            text: ''
        Label:
            text: ''
        Button:
            text: 'X-'
            font_size: 28
            bold: True
            on_press: app.x_move_neg()
        Label:
            text: ''
        Button:
            text: 'Z-'
            font_size: 28
            bold: True
            on_press: app.z_move_neg()

#slider vitesse

    BoxLayout:
        pos: 453, 40
        size: 290, 20
        Slider:
            id: curseur_vitesse
            orientation: 'horizontal'
            size_hint_x: 2
            min: 50
            max: 800
            background_width: '15sp'
            cursor_size: (20, 20)
            step: 50
        Label:
            text: "Vitesse: " +str(round(root.ids.curseur_vitesse.value,1))
            padding: 2, 2
            bold: True

#slider pas

    BoxLayout:
        pos: 453, 90
        size: 290, 20
        Slider:
            id: curseur_pas
            orientation: 'horizontal'
            size_hint_x: 2
            min: 0.1
            max: 5
            background_width: '15sp'
            cursor_size: (20, 20)
            step: 0.1
        Label:
            text: "Pas: " +str(round(root.ids.curseur_pas.value,1))
            padding: 2, 2
            bold: True

#version

    BoxLayout:
        pos: 700, 1
        size: 20, 30
        Label:
            text: 'Robot Arm Command V0.1'
            italic: True
            font_size: 12